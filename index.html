<!DOCTYPE html><html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tralalero Blast!</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #2c3e50, #3498db);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      overflow: hidden;
    }
    h1 {
      color: white;
      text-shadow: 2px 2px 4px #000;
      margin-top: 10px;
    }
    #score {
      color: white;
      margin-bottom: 10px;
    }
    #game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }
    #board {
      display: grid;
      grid-template-columns: repeat(8, 40px);
      grid-template-rows: repeat(8, 40px);
      gap: 2px;
      background-color: #34495e;
      padding: 5px;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .cell {
      width: 40px;
      height: 40px;
      background-color: #2c3e50;
      border-radius: 4px;
      transition: background 0.2s;
    }
    .filled {
      background-color: #e74c3c;
    }
    #pieces {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    .piece {
      display: inline-grid;
      gap: 2px;
      cursor: grab;
    }
    .block {
      width: 40px;
      height: 40px;
      background-color: #f1c40f;
      border-radius: 4px;
    }
    .preview {
      opacity: 0.5;
    }
    @media (max-width: 600px) {
      #board {
        grid-template-columns: repeat(8, 30px);
        grid-template-rows: repeat(8, 30px);
      }
      .cell, .block {
        width: 30px;
        height: 30px;
      }
    }
  </style>
</head>
<body>
  <h1>Tralalero Blast!</h1>
  <div id="score">Pontos: 0</div>
  <div id="game-container">
    <div id="board"></div>
    <div id="pieces"></div>
  </div>
  <script>
    const board = document.getElementById('board');
    const piecesContainer = document.getElementById('pieces');
    const scoreEl = document.getElementById('score');
    const boardSize = 8;
    const boardState = Array(boardSize).fill(null).map(() => Array(boardSize).fill(0));
    let score = 0;function updateScore(points) {
  score += points;
  scoreEl.textContent = `Pontos: ${score}`;
}

function createBoard() {
  board.innerHTML = '';
  for (let i = 0; i < boardSize * boardSize; i++) {
    const cell = document.createElement('div');
    cell.classList.add('cell');
    board.appendChild(cell);
  }
}

function getCell(x, y) {
  return board.children[y * boardSize + x];
}

function drawBoard() {
  for (let y = 0; y < boardSize; y++) {
    for (let x = 0; x < boardSize; x++) {
      const cell = getCell(x, y);
      cell.classList.toggle('filled', boardState[y][x] === 1);
    }
  }
}

function generatePiece() {
  const shapes = [
    [[1, 1], [1, 1]], // square
    [[1, 1, 1, 1]], // line
    [[1], [1], [1], [1]], // vertical line
    [[1, 0], [1, 0], [1, 1]], // L
    [[1, 1, 0], [0, 1, 1]], // zigzag
  ];
  const shape = shapes[Math.floor(Math.random() * shapes.length)];
  return shape;
}

function renderPieces() {
  piecesContainer.innerHTML = '';
  for (let i = 0; i < 3; i++) {
    const shape = generatePiece();
    const piece = document.createElement('div');
    piece.classList.add('piece');
    piece.dataset.shape = JSON.stringify(shape);
    piece.style.gridTemplateColumns = `repeat(${shape[0].length}, auto)`;
    shape.forEach(row => {
      row.forEach(cell => {
        const block = document.createElement('div');
        if (cell === 1) block.classList.add('block');
        piece.appendChild(block);
      });
    });
    piece.draggable = true;
    piece.addEventListener('dragstart', e => {
      e.dataTransfer.setData('text/plain', piece.dataset.shape);
    });
    piecesContainer.appendChild(piece);
  }
}

board.addEventListener('dragover', e => e.preventDefault());
board.addEventListener('drop', e => {
  const rect = board.getBoundingClientRect();
  const x = Math.floor((e.clientX - rect.left) / (rect.width / boardSize));
  const y = Math.floor((e.clientY - rect.top) / (rect.height / boardSize));
  const shape = JSON.parse(e.dataTransfer.getData('text/plain'));

  if (canPlace(shape, x, y)) {
    placeShape(shape, x, y);
    clearLines();
    drawBoard();
    renderPieces();
  } else if (!hasValidMoves()) {
    alert('Game Over!');
    location.reload();
  }
});

function canPlace(shape, x, y) {
  for (let i = 0; i < shape.length; i++) {
    for (let j = 0; j < shape[i].length; j++) {
      if (shape[i][j] === 1) {
        const bx = x + j;
        const by = y + i;
        if (bx < 0 || by < 0 || bx >= boardSize || by >= boardSize || boardState[by][bx] === 1) {
          return false;
        }
      }
    }
  }
  return true;
}

function placeShape(shape, x, y) {
  for (let i = 0; i < shape.length; i++) {
    for (let j = 0; j < shape[i].length; j++) {
      if (shape[i][j] === 1) {
        boardState[y + i][x + j] = 1;
      }
    }
  }
  updateScore(10);
}

function clearLines() {
  for (let y = 0; y < boardSize; y++) {
    if (boardState[y].every(cell => cell === 1)) {
      boardState[y].fill(0);
      updateScore(50);
    }
  }
}

function hasValidMoves() {
  const pieces = Array.from(piecesContainer.children).map(p => JSON.parse(p.dataset.shape));
  for (let y = 0; y < boardSize; y++) {
    for (let x = 0; x < boardSize; x++) {
      for (let shape of pieces) {
        if (canPlace(shape, x, y)) return true;
      }
    }
  }
  return false;
}

createBoard();
drawBoard();
renderPieces();

  </script>
</body>
</html>